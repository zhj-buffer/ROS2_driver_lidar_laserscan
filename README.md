# ROS2_driver_lidar_laserscan

# ROS2_driver_lidar
ROS2 (foxy) driver package for Lidar on Jetson


# Install dependencies
```
sudo apt-get update
sudo apt-get install -y libyaml-cpp-dev
sudo apt-get install -y libpcap-dev
```
# PCL-1.9.1 required, need to compile from source

# compile
``` 
mkdir -p dev_ws/src && cd dev_ws/src
git clone https://github.com/zhj-buffer/ROS2_driver_lidar_laserscan.git
cd ..
colcon build

source install/setup.bash
```

# launch
```
ros2 launch rslidar_sdk start.py
```

```
alan@nvidia-desktop:~/src$ ros2 topic list 
/parameter_events 
/rosout
/rslidar_points
/rslidar_sdk/rslidar_laserscan
```


```

alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$ ros2 interface show  rslidar_msg/msg/RslidarPacket 
builtin_interfaces/Time stamp 
uint8[1248] data
alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$ ros2 interface show  rslidar_msg/msg/RslidarScan 
std_msgs/Header header 
RslidarPacket[] packets
alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$  

```


```
 ros2 run rslidar_sdk rslidar_sdk_node

alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$ ros2 node list 
/rslidar_laserscan_adapter 
/rslidar_points_adapter
alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$ ros2 topic list 
/parameter_events 
/rosout
/rslidar_points
/scan
alan@nvidia-desktop:~/src/AMR_ros2_slam_nav2$  
```


```
---
header: 
  stamp:
    sec: 1641795356
    nanosec: 610660076
  frame_id: /rslidar
angle_min: -3.1415927410125732
angle_max: 3.1415927410125732
angle_increment: 0.003490658476948738
time_increment: 0.0
scan_time: 0.0
range_min: 0.0
range_max: 150.0
ranges: [.nan, 2.804504156112671, 2.804504156112671, 2.7995107173919678, 2.809497594833374, 2.799510955810547, 2.7895243167877197, 2.704639196395874, 2.469957113265991, 2.4000518321990967, 2.3900654315948486, 2.4000518321990967, 2.3950586318969727, 2.3900654315948486, 2.410038471221924, 2.459970712661743, .inf, 2.7895243167877197, 2.7745447158813477, 2.7795379161834717, 2.7745444774627686, 2.7745444774627686, 2.7695515155792236, 2.7645583152770996, 2.7645583152770996, .inf, 2.425018072128296, 2.410038471221924, 2.410038471221924, 2.410038471221924, 2.410038709640503, 2.410038471221924, 2.410038709640503, 2.410038471221924, 2.4100382328033447, 2.410038471221924, 2.45497727394104, 2.3601059913635254, 2.2252886295318604, 2.180349349975586, 2.175356149673462, 2.180349349975586, 2.180349349975586, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.195328950881958, 2.195329189300537, 2.2003226280212402, 2.200322389602661, 2.195328950881958, 2.190335750579834, 2.18534255027771, 2.175355911254883, 2.170362949371338, 2.18534255027771, 2.195328950881958, 2.205315351486206, 2.210308790206909, 2.210308790206909, 2.205315351486206, 2.205315351486206, 2.2103090286254883, 2.210308790206909, 2.2153022289276123, 2.2153022289276123, 2.2153022289276123, 2.2153024673461914, 2.210308790206909, 2.2202951908111572, 2.2252888679504395, 2.2302818298339844, 2.2352750301361084, 2.2302818298339844, 2.2252886295318604, 2.2252886295318604, 2.2153022289276123, 2.2302818298339844, .inf, 2.9143552780151367, 2.91934871673584, 2.9093620777130127, 2.909362554550171, 2.91934871673584, 2.924341917037964, 2.929335117340088, 2.939321994781494, 2.929335117340088, 2.934328317642212, .inf, .inf, 1.8258293867111206, .inf, 1.805856466293335, 1.8008633852005005, 1.7958699464797974, 1.7908767461776733, 1.7858836650848389, 1.7858835458755493, 1.7808904647827148, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808904647827148, 1.7808904647827148, 1.7808903455734253, 1.7808903455734253, 1.7858835458755493, 1.7858835458755493, 1.7908767461776733, 1.7958699464797974, 1.805856466293335, 1.805856466293335, 1.8008633852005005, 1.7609171867370605, 1.7209713459014893, 1.7209713459014893, '...']
intensities: [0.0, 7.0, 8.0, 8.0, 9.0, 9.0, 9.0, 9.0, 7.0, 11.0, 10.0, 11.0, 11.0, 12.0, 14.0, 13.0, 0.0, 12.0, 14.0, 15.0, 14.0, 14.0, 13.0, 11.0, 27.0, 0.0, 12.0, 
13.0, 13.0, 13.0, 13.0, 12.0, 15.0, 4.0, 12.0, 29.0, 15.0, 2.0, 2.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 0.0, 7.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 0.0, 0.0, 3.0, 0.0, 10.0, 10.0, 10.0, 9.0, 9.0, 10.0, 11.0, 11.0, 12.0, 12.0, 12.0, 17.0, 16.0, 16.0, 15.0, 14.0, 14.0, 14.0, 14.0, 15.0, 14.0, 8.0, 9.0, 13.0, '...']
---
header: 
  stamp:
    sec: 1641795356
    nanosec: 710593939
  frame_id: /rslidar
angle_min: -3.1415927410125732
angle_max: 3.1415927410125732
angle_increment: 0.003490658476948738
time_increment: 0.0
scan_time: 0.0
range_min: 0.0
range_max: 150.0
ranges: [.nan, 2.809497356414795, 2.809497356414795, 2.814490795135498, 2.799510955810547, 2.799510955810547, 2.7645583152770996, .inf, 2.410038471221924, 2.4000518321990967, 2.400052070617676, 2.400052070617676, 2.3950588703155518, 2.3950586318969727, 2.430011510848999, .inf, 2.7595651149749756, 2.7745447158813477, 2.7745449542999268, 2.7695515155792236, 2.7745444774627686, 2.7745447158813477, 2.784531354904175, 2.7745447158813477, 2.7345988750457764, .inf, 2.3950586318969727, 2.3950586318969727, 2.4050450325012207, 2.410038471221924, 2.410038471221924, 2.410038471221924, 2.4050450325012207, 2.410038709640503, 2.410038471221924, 2.410038471221924, 2.444990873336792, 2.305180311203003, 2.195329189300537, 2.180349349975586, 2.180349588394165, 2.190335750579834, 2.18534255027771, 2.18534255027771, 2.18534255027771, 
2.18534255027771, 2.18534255027771, 2.185342788696289, 2.18534255027771, 2.180349349975586, 2.180349349975586, 2.180349349975586, 2.180349349975586, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.185342788696289, 2.18534255027771, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.195328950881958, 2.195328950881958, 2.2003226280212402, 2.200322389602661, 2.200322389602661, 2.200322389602661, 2.200322389602661, 2.200322389602661, 2.2003226280212402, 2.205315351486206, 2.205315351486206, 2.205315351486206, 2.205315351486206, 2.205315351486206, 2.205315113067627, 2.205315351486206, 2.205315351486206, 2.2103090286254883, 2.2103090286254883, 2.2153022289276123, 2.2202951908111572, 2.2252888679504395, 2.2302820682525635, 2.2352750301361084, 2.2402682304382324, 2.2552483081817627, 2.2652344703674316, 2.2902004718780518, .inf, 2.924341917037964, 2.929335355758667, 2.929335355758667, 2.934328079223633, 2.934328317642212, 2.939321994781494, 2.94431471824646, 2.934328079223633, 2.94431471824646, 2.94431471824646, .inf, .inf, 1.8358159065246582, 1.8208361864089966, 1.800863265991211, 1.7958699464797974, 1.7908767461776733, 1.7858835458755493, 1.7858835458755493, 1.7808903455734253, 1.7808903455734253, 1.7758970260620117, 1.7758970260620117, 1.7758969068527222, 1.7758969068527222, 1.7808903455734253, 1.7808904647827148, 1.7808903455734253, 1.7858835458755493, 1.7858835458755493, 1.7908766269683838, 1.8008631467819214, 1.8058565855026245, 1.8008631467819214, 1.7709038257598877, 1.7359510660171509, 1.7059917449951172, 1.7109849452972412, '...']
intensities: [0.0, 8.0, 8.0, 9.0, 9.0, 10.0, 10.0, 0.0, 11.0, 12.0, 12.0, 12.0, 13.0, 11.0, 17.0, 0.0, 6.0, 14.0, 13.0, 14.0, 14.0, 12.0, 17.0, 15.0, 31.0, 0.0, 9.0, 10.0, 14.0, 13.0, 13.0, 11.0, 15.0, 4.0, 28.0, 29.0, 5.0, 2.0, 2.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 4.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 0.0, 9.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 0.0, 0.0, 4.0, 10.0, 10.0, 10.0, 9.0, 10.0, 10.0, 11.0, 12.0, 12.0, 13.0, 12.0, 13.0, 12.0, 11.0, 11.0, 10.0, 10.0, 10.0, 10.0, 11.0, 10.0, 9.0, 6.0, 8.0, 10.0, '...']
---
header: 
  stamp:
    sec: 1641795356
    nanosec: 810633659
  frame_id: /rslidar
angle_min: -3.1415927410125732
angle_max: 3.1415927410125732
angle_increment: 0.003490658476948738
time_increment: 0.0
scan_time: 0.0
range_min: 0.0
range_max: 150.0
ranges: [.nan, 2.804504156112671, 2.804504156112671, 2.804504156112671, 2.804504156112671, 2.804504156112671, 2.794517993927002, 2.7545719146728516, .inf, 2.4050450325012207, 2.4000518321990967, 2.3950586318969727, 2.4000518321990967, 2.4000518321990967, 2.4000518321990967, 2.435004472732544, .inf, 2.7795379161834717, 2.7795379161834717, 2.7795379161834717, 2.7745447158813477, 2.7745447158813477, 2.7745447158813477, 2.7795379161834717, 2.7745449542999268, 2.714625835418701, .inf, 2.3950586318969727, 2.4050450325012207, 2.4050450325012207, 2.4050450325012207, 2.4000518321990967, 2.400052070617676, 2.3850719928741455, .inf, 2.4050450325012207, 2.4200246334075928, 2.2902004718780518, 2.1653695106506348, 2.170362949371338, 2.175355911254883, 2.180349349975586, .inf, 2.175355911254883, 2.175356149673462, 2.180349349975586, 2.180349588394165, 2.180349349975586, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.195328950881958, 2.2003226280212402, 2.205315113067627, 2.205315589904785, 2.210308790206909, 2.2103090286254883, 2.210308790206909, 2.2103090286254883, 2.2153022289276123, 2.2153022289276123, 2.2153022289276123, 2.2103090286254883, 2.200322389602661, 2.18534255027771, 2.210308790206909, 2.2202954292297363, 2.2352750301361084, 2.2402682304382324, 2.2502546310424805, 2.2602412700653076, 2.2502546310424805, 2.2452616691589355, .inf, .inf, .inf, .inf, 2.909362316131592, 2.9043688774108887, 2.9143552780151367, 2.914355516433716, 2.91934871673584, 2.9143552780151367, 2.924342155456543, 2.929335117340088, 2.929335117340088, .inf, .inf, .inf, 1.8308225870132446, 1.8258293867111206, 1.805856466293335, 1.7908767461776733, 1.7858835458755493, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7808903455734253, 1.7858836650848389, 1.7858835458755493, 1.7908767461776733, 1.7958699464797974, 1.8008633852005005, 1.7958699464797974, 1.7958699464797974, 1.7709038257598877, 1.750930905342102, 1.7309579849243164, 1.7109850645065308, '...']
intensities: [0.0, 8.0, 7.0, 8.0, 9.0, 9.0, 10.0, 10.0, 0.0, 11.0, 11.0, 12.0, 12.0, 12.0, 11.0, 16.0, 0.0, 8.0, 15.0, 14.0, 14.0, 14.0, 13.0, 13.0, 22.0, 33.0, 0.0, 12.0, 12.0, 12.0, 11.0, 13.0, 12.0, 5.0, 0.0, 29.0, 27.0, 2.0, 3.0, 4.0, 4.0, 4.0, 0.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 0.0, 0.0, 0.0, 0.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 8.0, 9.0, 9.0, 0.0, 0.0, 0.0, 5.0, 11.0, 11.0, 10.0, 10.0, 11.0, 11.0, 12.0, 12.0, 13.0, 13.0, 13.0, 13.0, 13.0, 12.0, 12.0, 11.0, 11.0, 11.0, 11.0, 11.0, 10.0, 8.0, 7.0, 8.0, 11.0, '...']
---
header: 
  stamp:
    sec: 1641795356
    nanosec: 910637617
  frame_id: /rslidar
angle_min: -3.1415927410125732
angle_max: 3.1415927410125732
angle_increment: 0.003490658476948738
time_increment: 0.0
scan_time: 0.0
range_min: 0.0
range_max: 150.0
ranges: [.nan, 2.809497356414795, 2.809497594833374, 2.809497356414795, 2.809497594833374, 2.799511194229126, 2.7895240783691406, 2.7345991134643555, .inf, 2.4050450325012207, 2.4000518321990967, 2.4000518321990967, 2.4000518321990967, 2.3950588703155518, 2.3950586318969727, 2.439997673034668, .inf, 2.784531354904175, 2.7695515155792236, 2.7745447158813477, 2.7695512771606445, 2.7745447158813477, 2.7695515155792236, 2.7745449542999268, 2.7795379161834717, .inf, .inf, 2.4050450325012207, 2.4050450325012207, 2.4000518321990967, 2.3950586318969727, 2.4000518321990967, 2.4050450325012207, 2.4050450325012207, 2.3950586318969727, 2.410038471221924, 2.444991111755371, 2.410038471221924, 2.2153022289276123, 2.18534255027771, 2.16037654876709, 2.175355911254883, 2.175355911254883, 2.180349588394165, 2.180349349975586, 2.180349349975586, 2.180349588394165, 2.175356149673462, 2.180349349975586, 2.180349588394165, 2.180349349975586, 2.180349349975586, 2.180349588394165, 2.180349349975586, 2.180349349975586, 2.180349349975586, 2.180349588394165, 2.18534255027771, 2.18534255027771, 2.18534255027771, 2.190335750579834, 2.190335750579834, 2.190335750579834, 2.190335988998413, 2.195328950881958, 2.195328950881958, 2.195328712463379, 2.200322389602661, 2.210308790206909, 2.2153022289276123, 2.2202951908111572, 2.2202951908111572, 2.2153022289276123, 2.210308790206909, 2.205315113067627, 2.205315351486206, 2.210308790206909, 2.2153022289276123, 2.220294952392578, 2.2252886295318604, 2.2302818298339844, 2.2302818298339844, 2.2352750301361084, 2.2352752685546875, 2.2402682304382324, 2.2402682304382324, 2.2602412700653076, 2.2252886295318604, 2.2652342319488525, 2.3401331901550293, 2.944314479827881, 2.939321994781494, 2.944314479827881, 2.939321756362915, 2.94431471824646, 2.949308395385742, 2.949308156967163, 2.954301118850708, 2.954301118850708, 2.954301118850708, 2.954301118850708, .inf, 1.8507956266403198, 1.8108497858047485, 1.8008631467819214, 1.795870065689087, 1.7908767461776733, 1.7858835458755493, 1.7858835458755493, 1.7808903455734253, 1.7808904647827148, 1.7808903455734253, 1.7758970260620117, 1.7758971452713013, 1.7758970260620117, 1.7758970260620117, 1.7808903455734253, 1.7808903455734253, 1.7858835458755493, 1.7908767461776733, .inf, 1.795870065689087, 1.805856466293335, 1.7958699464797974, .inf, 1.76091730594635, 1.7159781455993652, 1.7109849452972412, '...']
intensities: [0.0, 8.0, 8.0, 9.0, 9.0, 9.0, 10.0, 10.0, 0.0, 13.0, 12.0, 13.0, 12.0, 12.0, 12.0, 15.0, 0.0, 9.0, 14.0, 14.0, 13.0, 13.0, 12.0, 12.0, 25.0, 0.0, 0.0, 
12.0, 13.0, 13.0, 12.0, 12.0, 15.0, 4.0, 7.0, 29.0, 22.0, 2.0, 2.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 7.0, 11.0, 11.0, 11.0, 12.0, 11.0, 11.0, 11.0, 12.0, 11.0, 12.0, 0.0, 3.0, 12.0, 11.0, 10.0, 10.0, 11.0, 11.0, 12.0, 13.0, 14.0, 13.0, 14.0, 14.0, 13.0, 13.0, 12.0, 11.0, 11.0, 0.0, 11.0, 12.0, 11.0, 0.0, 8.0, 7.0, 12.0, '...']
```
```
alan@nvidia-desktop:~/src/AMR$ ros2 topic list 
/bms_fb 
/bms_flag_fb
/ctrl_cmd
/ctrl_fb
/io_cmd 
/io_fb
/joint_states
/l_wheel_fb
/odom
/parameter_events
/r_wheel_fb
/rada1
/rada2
/rear_free_ctrl_cmd
/robot_description
/rosout
/rslidar_laserscan
/rslidar_points
/smoother_cmd_vel
/tf
/tf_static
alan@nvidia-desktop:~/src/AMR$  
```
